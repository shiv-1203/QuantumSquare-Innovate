const ArgumentType = require('../../extension-support/argument-type');
const BlockType = require('../../extension-support/block-type');
const TargetType = require('../../extension-support/target-type');
const formatMessage = require('format-message');
const log = require('../../util/log');

/**
 * Icon svg to be displayed at the left edge of each extension block, encoded as a data URI.
 * @type {string}
 */
// eslint-disable-next-line max-len
const blockIconURI = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNjAwLjAwMDAwMHB0IiBoZWlnaHQ9IjM3Mi4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDYwMC4wMDAwMDAgMzcyLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzcyLjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTgyOCAzNDgzIGMtMTYgLTQgLTE4IC0yMSAtMTggLTE4NSBsMCAtMTgxIDE2OCA2IGMxMzEgNCAxNzcgOSAyMTMKMjQgNTggMjMgMTAxIDU4IDEyMyAxMDAgMjIgNDMgMjAgNzggLTUgMTMxIC0yOSA1OCAtOTAgODcgLTIxNCAxMDIgLTkwIDEwCi0yMzQgMTIgLTI2NyAzeiBtMzEwIC04NyBjNDIgLTIyIDY4IC03NyA1NSAtMTIwIC01IC0xOCAtMjUgLTQyIC00OSAtNTkgLTM2Ci0yNSAtNTAgLTI5IC0xMjUgLTMwIGwtODQgLTIgLTMgMTA0IGMtMSA1OCAwIDExMSAzIDExOSA4IDIxIDE1OCAxMiAyMDMgLTEyeiIvPgo8cGF0aCBkPSJNMjA4MyAzNDg0IGMtMTAgLTQgLTEzIC01MSAtMTMgLTE4NSBsMCAtMTc5IDU1IDAgNTUgMCAwIDU5IGMwIDY5IDMKNzEgOTIgNzEgMTI2IDAgMjE4IDUyIDIxOCAxMjQgMCAzOSAtNDAgODIgLTg5IDk2IC0zOSAxMSAtMzAwIDIzIC0zMTggMTR6Cm0yMzEgLTY4IGMzOCAtMTYgNTIgLTQ1IDM2IC03NiAtMTMgLTI1IC00MSAtMzIgLTEwOSAtMjggbC01MyAzIC0yIDQ0IGMtMiAyNgozIDQ5IDEyIDU3IDE3IDE4IDczIDE4IDExNiAweiIvPgo8cGF0aCBkPSJNMjk3NiAzNDgyIGMtMjQgLTUgLTIxIC01MiA0IC01MiAzMSAwIDM3IC0yNyAzMiAtMTQyIC00IC05NCAtNwotMTA4IC0yMSAtMTA4IC0yNCAwIC0yOSAtNyAtMjMgLTM1IDQgLTI1IDUgLTI1IDExNCAtMjUgbDEwOSAwIC0zIDI3IGMtMiAxOAotMTAgMjkgLTIzIDMyIC0zMSA1IC0zNSAxOSAtMzUgMTE5IDAgMTAxIDEwIDEzMiA0MCAxMzIgMTUgMCAyMCA3IDIwIDI0IDAgMjQKLTIgMjUgLTk5IDI4IC01NCAyIC0xMDYgMiAtMTE1IDB6Ii8+CjxwYXRoIGQ9Ik0zNDY1IDM0ODAgYy0xNzIgLTM1IC0yNTMgLTE2NSAtMTcwIC0yNzUgNDMgLTU3IDk3IC03NyAyMjIgLTgzIDYxCi0yIDEzMiAtMSAxNTcgMiA0NSA3IDQ2IDggNDYgNDMgMCAzMiAtMiAzNSAtMjIgMjkgLTUwIC0xNCAtMTU1IC0xOCAtMTk1IC03Ci0xMjkgMzUgLTE0OSAxNTcgLTM0IDIxMyA0OCAyMyAxNDcgMzAgMjE0IDE0IGwzNyAtOCAwIDM1IGMwIDMyIC0zIDM1IC0zNyA0MQotNTEgOCAtMTY4IDYgLTIxOCAtNHoiLz4KPHBhdGggZD0iTTE0NDIgMzM0NiBjMyAtMTMzIDMgLTEzNSAzMiAtMTY1IDQ4IC01MCA5OCAtNjMgMjIyIC01OSAxMjAgNCAxNzAKMjAgMjAzIDY3IDIyIDMwIDI0IDQ3IDIyIDE4OSBsLTEgMTAyIC02MCAwIC02MCAwIDAgLTEyMSBjMCAtNjYgLTQgLTEyOSAtMTAKLTEzOSAtMTEgLTIxIC02MCAtNDAgLTEwNSAtNDAgLTgxIDAgLTEyNiA0NCAtMTE3IDExMyAyIDIxIDEgNzEgLTMgMTEyIGwtNwo3NSAtNjAgMCAtNjAgMCA0IC0xMzR6Ii8+CjxwYXRoIGQ9Ik0yNTkwIDMzMDAgbDAgLTE4MCAxNzYgMCAxNzUgMCAtMyAyOCAtMyAyNyAtMTEwIDUgLTExMCA1IC0zIDE0OCAtMwoxNDcgLTU5IDAgLTYwIDAgMCAtMTgweiIvPgo8cGF0aCBkPSJNMzk2MCAzNDcxIGMwIC03IC0zMiAtNjcgLTYwIC0xMTEgLTM5IC02MSAtMTMwIC0yMjIgLTEzMCAtMjMwIDAgLTYKMjcgLTEwIDYwIC0xMCA1OSAwIDYwIDEgODUgNDAgbDI1IDQwIDEwNSAwIDEwNSAwIDI1IC00MCBjMjUgLTQwIDI1IC00MCA5MAotNDAgMzYgMCA2NSA0IDY1IDkgMCA0IC04IDE5IC0xOCAzMiAtMTYgMjAgLTg5IDE0NyAtMTE1IDE5OSAtNCA4IC0xOCAzMyAtMzIKNTUgLTE0IDIyIC0yOCA0NiAtMzEgNTMgLTcgMTQgLTE3NCAxOCAtMTc0IDN6IG0xMjYgLTEzMSBjMTggLTM0IDMxIC02NyAyOAotNzEgLTcgLTEyIC0xMjUgLTExIC0xNDQgMSAtOCA1IC0xMCAxMCAtNSAxMCA2IDAgMjQgMzAgNDAgNjUgMTcgMzYgMzQgNjMgMzkKNjIgNSAtMiAyNCAtMzIgNDIgLTY3eiIvPgo8cGF0aCBkPSJNNDM2MiAzNDUzIGMzIC0yNyA1IC0yOCA4MyAtMzMgbDgwIC01IDMgLTE0NyAzIC0xNDggNTkgMCA1OSAwIDMKMTQ4IDMgMTQ3IDgwIDUgYzc4IDUgODAgNiA4MyAzMyBsMyAyNyAtMjMxIDAgLTIzMSAwIDMgLTI3eiIvPgo8cGF0aCBkPSJNNDkxMCAzMzAwIGwwIC0xODAgMTc1IDAgMTc1IDAgMCAzMCAwIDI5IC0xMTIgMyAtMTEzIDMgMCA0MCAwIDQwCjc1IDMgYzExMCAzIDEyMiA3IDExOCA0MCBsLTMgMjcgLTk4IDMgLTk4IDMgMyAzNyAzIDM3IDEwMCA1IDEwMCA1IDMgMjggMyAyNwotMTY1IDAgLTE2NiAwIDAgLTE4MHoiLz4KPHBhdGggZD0iTTIzNjAgMjkwNCBjLTQ0IC0xOCAtNzMgLTYwIC0xMDYgLTE1NCAtNDIgLTEyMCAtOTQgLTMxMCAtOTQgLTM0NyAwCi0yMCAtNSAtMjMgLTM5IC0yMyAtMzUgMCAtNDQgNiAtODUgNTQgLTI1IDI5IC00NiA1NiAtNDYgNTggMCAzIC0xOCAzMyAtNDAKNjYgbC00MCA2MCAtNTggLTI0IGMtMzEgLTEzIC02MiAtMjQgLTY4IC0yNCAtNiAwIC0zMSAtOSAtNTUgLTE5IC0yNCAtMTEgLTgwCi0yOSAtMTI0IC00MSAtNDQgLTEyIC04NSAtMjYgLTkyIC0zMiAtMjIgLTE4IC0xNCAtNDQgMjAgLTYwIGwzMiAtMTYgLTM3IC0xNgpjLTQ2IC0xOSAtNDcgLTMzIC05IC03MCAxNSAtMTUgMzcgLTQ1IDQ3IC02NyAxMSAtMjEgMjIgLTM5IDI3IC0zOSA0IDAgNyAtNgo3IC0xMiAwIC0yNCAxNyAtMzkgNTEgLTQ4IDE5IC01IDY3IC0xOCAxMDcgLTI4IDQwIC0xMSA3MyAtMjAgNzUgLTIwIDEgMCAyMwotNiA1MCAtMTIgNDUgLTEyIDQ3IC0xNCA0NiAtNDkgLTEgLTYxIC0yNCAtMjM1IC0zMiAtMjQ4IC02IC0xMCAtNzYgLTEzIC0yOTEKLTEzIC0yNDUgMCAtMjg1IDIgLTI5NyAxNiAtOCA5IC0yMSAxMyAtMzUgMTAgLTI4IC03IC00NCAxNyAtNDQgNjggMCAyOCA4IDQzCjM3IDY5IDM5IDM2IDMyIDYxIC03IDI3IC0zMSAtMjcgLTQ3IC0yNSAtNTQgNyAtOSAzNCA0IDQ1IDc3IDY3IDMxIDEwIDU3IDIwCjU3IDIyIDAgNCAtMzcgNDggLTcwIDg0IC04IDkgLTMzIDM4IC01NSA2NSAtMjIgMjggLTUzIDYzIC02OCA4MCAtMjYgMjYgLTI4CjM0IC0yMiA3NyA3IDUyIDQgNTUgLTQyIDM3IC0xNSAtNiAtNjIgLTE3IC0xMDMgLTI0IC00MSAtOCAtMTA2IC0yMSAtMTQ1IC0yOQotMzggLTkgLTE0MCAtMjcgLTIyNSAtNDEgLTIyMSAtMzcgLTIwNiAtMzIgLTE4NSAtNTUgMTAgLTExIDE0IC0yMCAxMCAtMjAgLTQKMCAtMSAtOCA3IC0xNyA4IC0xMCAyOCAtNDMgNDQgLTczIDE1IC0zMCAzNiAtNjcgNDYgLTgxIDIwIC0zMCAxMSAtNDUgLTMyCi01MSAtMzUgLTQgLTM5IC00NyAtNyAtODQgMTggLTIxIDM2IC0yOSA3MiAtMzMgMjggLTQgNTEgLTEyIDU2IC0yMSAxNiAtMzAKMzkgLTg2IDQ4IC0xMTcgOSAtMzAgOCAtMzIgLTIyIC0zOSAtMTggLTQgLTQ4IC0xMyAtNjcgLTIyIC01NyAtMjQgLTc0IC0zMAotMTAwIC0zNyAtMTQgLTMgLTEwMyAtMzEgLTE5NyAtNjIgbC0xNzMgLTU1IDkzIC04NyBjNTAgLTQ4IDExNiAtMTA5IDE0NAotMTM1IGw1MyAtNDkgNDUgMTMgYzM4IDExIDUzIDEwIDg1IDAgMzQgLTExIDQwIC0xOCA0MCAtNDAgMCAtNDIgLTI0IC01NyAtNjMKLTQxIC01OCAyNCAtOTEgMjUgLTExMiAxIC0xOSAtMjEgLTE5IC0yMiAtMSAtMzYgMTAgLTcgMjMgLTE1IDI3IC0xNiA1IC0yIDEwCi0xMyAxMiAtMjYgNSAtMzMgMjQgLTQyIDczIC0zNSAyOSA0IDQ5IDEgNjUgLTEwIDIyIC0xNSAzMCAtMTUgODQgLTEgMTQzIDM2CjEzMiAzMSAxMjcgNjMgLTMgMjIgMSAzMiAxNyA0MCAyOSAxNiA2NCAtMiA1MiAtMjcgLTUgLTkgLTIxIC01NyAtMzYgLTEwNwotMTUgLTQ5IC0zMiAtMTA1IC0zOCAtMTI0IC05IC0yNyAtOSAtMzUgMSAtMzggNiAtMyAxMiAtMjAgMTIgLTM5IDAgLTI4IDQKLTM0IDIyIC0zNCAxMiAwIDI5IDcgMzkgMTYgMTUgMTQgMjAgMTQgNDYgMCAyNCAtMTIgNzUgLTE1IDI2NCAtMTUgMjY0IDAgMzI2CjggMzM1IDQ0IDMgMTMgMyAyOSAtMSAzNCAtOSAxNiAtNzEgMTMgLTE2MCAtNSAtNTYgLTEyIC04MCAtMTMgLTg4IC01IC04IDgKLTUgMTUgMTEgMjcgMTIgOCAyMiAyNCAyMiAzNiAwIDIyIDE3IDkwIDMwIDEyMyA1IDExIDExIDM2IDEzIDU1IDcgNDcgMjggMTIzCjM4IDEzNCA0IDUgMzAgMTEgNTYgMTMgNTcgNiA3OSAyMiA2NSA0OSAtMzMgNjQgLTEzMiAzNDggLTEyMyAzNTcgNSA1IDEzNiA0CjI5MiAtMiA0MTEgLTE2IDM2MSAtMjIgNDUwIDU3IDQxIDM3IDk1IDgzIDExOSAxMDIgMjUgMTkgNTQgNDQgNjUgNTUgMTIgMTEKNDcgNDIgNzggNjkgNTYgNDggNjQgNjYgMjYgNjYgLTEwIDAgLTE5IDQgLTE5IDkgMCAxMSA2OSAxMzAgODUgMTQ3IDUgNiAyMQoyNyAzNSA0NyAxNCAyMCAzNCA0MCA0NSA0MyAxMSA0IDIyIDEwIDI1IDEzIDMgNCAyOCAyMSA1NSAzOSAyOCAxNyA1NSAzNSA2MAozOSAzMCAyNCAxMDkgNzIgMTYyIDk5IDY2IDMzIDQ3IDgzIC0zNCA5MCAtNTggNSAtMTIzIC0zOCAtMjM4IC0xNTggLTU3IC01OQotMTEwIC0xMDggLTExNyAtMTA4IC0yMiAwIC00NCAxOSAtMzIgMjggNiA0IDQxIDQzIDc5IDg3IDk5IDExNyAyMzQgMjQ2IDI5MgoyODAgNjggNDAgNzYgNjcgMjYgOTQgLTY0IDMzIC0xNzYgLTEgLTI0OCAtNzYgLTc4IC04MSAtMTgxIC0yMzIgLTIyMiAtMzI1Ci0xNCAtMzEgLTU2IC00NiAtNzggLTI4IC0xMiAxMCAtMTEgMTkgOSA2MyA3NSAxNjUgMTM4IDI4MiAxNzkgMzI4IDE1IDE3IDI3CjM1IDI3IDQwIDAgNSAxNiAyNCAzNyA0MiA0MyA0MCA0MCA2MCAtMTMgODIgLTQ1IDE5IC05OCAxOSAtMTQ0IC0xeiBtLTQyNAotNDY3IGwzNCAtNzkgLTM3IC01NiBjLTIxIC0zMCAtNDcgLTU3IC01OCAtNTkgLTg5IC0xNiAtMTUxIC0yMyAtMTYyIC0xOSAtOQo0IC0xMyAyNSAtMTMgNjIgMCA0MCAtNSA2MyAtMTcgNzYgLTE1IDE3IC0xNSAyMCAtMyAyOCA4IDYgMjMgMTAgMzMgMTAgMzMgMAo5NiAzOSAxMjggODAgMTggMjMgMzkgMzkgNDcgMzggNyAtMiAyOSAtMzggNDggLTgxeiBtLTg0OSAtMjU5IGMyOCAtMjcgMzMKLTM5IDMzIC03OSAwIC0zMyAtNSAtNDkgLTE2IC01MyAtMjggLTExIC01OCAtNiAtODkgMTQgbC0yOSAxOSAtMTEgLTMyIGMtOQotMjkgLTE0IC0zMiAtNTggLTM1IC00MyAtMyAtNTEgMCAtODIgMzEgLTI3IDI3IC0zNSA0MyAtMzUgNzAgMCA1OSA2NiA4OCAxMTgKNTEgMjMgLTE2IDQyIC0xMiA0MiAxMCAwIDIyIDIzIDM2IDU5IDM2IDI2IDAgNDQgLTggNjggLTMyeiBtLTQ1MiAtNTk1IGMxMwotMzEgNDIgLTE4MiAzNyAtMTg4IC0xMiAtMTEgLTQzIC0zIC0xNjcgNDUgLTcxIDI4IC0xMzUgNTAgLTE0MSA1MCAtNyAwIC0yMgo4IC0zNSAxOSBsLTIzIDE4IDM1IDExIGMxOSA3IDU0IDE2IDc5IDIxIDI1IDYgNzIgMTYgMTA1IDI0IDgzIDIwIDEwMiAyMCAxMTAKMHogbTUxMCAtMzUzIGM2IC0xMCAtMTQgLTkxIC0zNSAtMTQ1IC00IC0xMSAtMTggLTU0IC0zMCAtOTUgLTI1IC04MyAtNDcKLTExMCAtOTEgLTExMCAtMjIgMCAtMjkgNSAtMjkgMjAgMCAxMSA2IDIwIDE0IDIwIDcgMCAxNiAxMiAxOSAyOCAzIDE1IDEzIDU2CjIyIDkyIDkgMzYgMTkgODIgMjIgMTAzIDMgMjAgOSA0MCAxNCA0MyA1IDMgOSAxNCA5IDI0IDAgMjYgNzEgNDIgODUgMjB6Cm0tNTI1IC00MCBjMCAtNSAtNCAtMTAgLTEwIC0xMCAtNSAwIC0xMCA1IC0xMCAxMCAwIDYgNSAxMCAxMCAxMCA2IDAgMTAgLTQKMTAgLTEweiBtMTMwIC0yOCBjMCAtNSAtNyAtOSAtMTUgLTkgLTggMCAtMTUgNCAtMTUgOSAwIDQgNyA4IDE1IDggOCAwIDE1IC00CjE1IC04eiIvPgo8cGF0aCBkPSJNMTAwMCAyMTQ3IGMwIC00MCA0NCAtNjUgNTcgLTMyIDYgMTggLTIzIDU1IC00NCA1NSAtNyAwIC0xMyAtMTAKLTEzIC0yM3oiLz4KPHBhdGggZD0iTTg1MyAyMTI0IGMtOCAtMjIgOSAtNDggMzYgLTUyIDI5IC01IDM4IDI0IDE2IDQ4IC0yMiAyNCAtNDMgMjYgLTUyCjR6Ii8+CjxwYXRoIGQ9Ik0zNTUzIDI5MDQgYy00MyAtMjEgLTQyIC00OCAxIC05NCAxOCAtMTkgNTMgLTY0IDc3IC0xMDAgNTggLTg1IDE4MwotMzM2IDE3NCAtMzUwIC0zIC01IC0xNyAtMTAgLTI5IC0xMCAtMTkgMCAtMzQgMTggLTc2IDkzIC05NSAxNjYgLTE3NSAyNjMKLTI1OSAzMTggLTM4IDI1IC01NSAyOSAtMTExIDI5IC03MSAwIC0xMTAgLTE4IC0xMTAgLTUwIDAgLTEyIDIxIC0zMyA1NyAtNTcKMzIgLTIxIDkxIC02OSAxMzIgLTEwOCA4MyAtNzkgMjMxIC0yNDggMjMxIC0yNjMgMCAtMzMgLTMwIC0xMyAtMTExIDcyIC0xMTMKMTE5IC0xOTUgMTc2IC0yNTMgMTc2IC04MCAwIC0xMTUgLTU1IC01NSAtODggMzIgLTE4IDE3MiAtMTA3IDI3NSAtMTc1IDQ4Ci0zMSA3NCAtNjAgMTIyIC0xMzEgNzkgLTExOCA4MSAtMTIzIDQ2IC0xMzYgLTMzIC0xMyAtNTUgMTAgMTk0IC0yMDMgbDE5MwotMTY2IDExNyA1IGM2NCAzIDIwOSA5IDMyMiAxNCAxMTMgNCAyMDkgNSAyMTMgMSA0IC01IDIgLTI2IC02IC00NyAtODcgLTIzNwotMTEwIC0zMDMgLTExNCAtMzI1IC01IC0yNSAtMyAtMjYgNTIgLTMyIDYwIC02IDg1IC0xOSA4NSAtNDYgMCAtNDMgNzIgLTMwNwo4NyAtMzE5IDI3IC0yMCAzIC0zNCAtMzcgLTIyIC0xMjEgMzUgLTIxMCAzMiAtMjEwIC03IDAgLTUzIDEwOSAtODEgMjU0IC02NQo2MyA3IDEwNiA3IDExNyAxIDI5IC0xNSAxNzIgLTExIDIyOSA4IDQ5IDE2IDUzIDE2IDYyIDAgMTkgLTM1IDY2IC0xNCA1OSAyNgotMSAxMCA1IDI0IDE1IDMyIDE3IDEyIDE2IDE3IC0xMCAxMDEgLTE1IDQ5IC0zMSA5NiAtMzUgMTA0IC01IDkgLTEyIDM1IC0xNgo1OSAtNyA0MSAtNiA0MyAxNiAzOSAyMCAtMiAyNCAtOSAyMyAtMzUgLTIgLTMxIDEgLTMzIDUwIC00NyAxMzYgLTM4IDE1MCAtNDAKMTgyIC0yMyAxNiA4IDQyIDEzIDU2IDEwIDQ3IC05IDc2IDQgODAgMzUgMiAxOSA5IDI4IDI1IDMwIDI4IDQgMzUgMjUgMTcgNTEKLTE4IDI2IC03NSAyOCAtMTE5IDUgLTI4IC0xNCAtMzEgLTE0IC00OCA3IC0zNiA0NSA3IDcyIDEwMyA2NCBsNjUgLTUgNjUgNjIKYzIyNyAyMTYgMjEzIDIwMSAxOTQgMjE1IC0xMCA3IC0yMyAxMyAtMjkgMTMgLTE2IDAgLTQwNSAxMjggLTQ0MiAxNDUgLTE3IDgKLTM4IDE1IC00NiAxNSAtMzQgMCAtMzEgMjEgMjIgMTMwIDE1IDMxIDIyIDM2IDY1IDQxIDEwMyAxMSAxMzYgMTI5IDM3IDEyOQotMTIgMCAtMjEgMyAtMjEgNiAwIDMgMjkgNTYgNjUgMTE5IDM2IDYyIDY1IDExNyA2NSAxMjIgMCA1IC01MSAxNyAtMTEyIDI3Ci02MiAxMCAtMjE0IDM4IC0zMzggNjMgLTEyNCAyNSAtMjM3IDQ4IC0yNTEgNTAgLTI2IDUgLTI2IDQgLTIxIC00NyAzIC0zNyAxCi01NCAtMTAgLTYzIC04IC03IC00OSAtNTMgLTkwIC0xMDIgLTQyIC01MCAtODMgLTk3IC05MiAtMTA0IC0yOCAtMjQgLTE3IC0zOQo0NyAtNjMgNTcgLTIyIDYyIC0yNyA2MCAtNTIgLTMgLTM5IC04IC00MSAtMzkgLTE3IC00MiAzMyAtNTAgMTIgLTEwIC0yOCA0MAotNDEgNDAgLTQxIDI1IC05MyAtOCAtMzIgLTE0IC0zOCAtMzcgLTM4IC0xNiAwIC0zMyAtNSAtMzkgLTExIC0xMyAtMTMgLTU2MwotMTMgLTU3NCAtMSAtMTAgMTEgLTM2IDI2MCAtMjkgMjcyIDMgNSAyNiAxNCA1MSAxOSA1NCAxMiAxOTMgNDggMjM0IDYxIDIzIDgKMzggMjQgNTggNjUgMTQgMzAgNDIgNzIgNjIgOTMgMTkgMjIgMzUgNDQgMzUgNTAgMCA3IC0xNCAxOSAtMzEgMjcgbC0zMCAxNgoyNSAyMCBjNDkgMzggMjYgNjQgLTg0IDkzIC0zNiA5IC0xMjAgMzggLTE4OCA2MyAtNjggMjUgLTEyNCA0NCAtMTI2IDQyIC0yCi0yIC0yOSAtNDIgLTU5IC04OSAtNzUgLTExNCAtMTExIC0xNTAgLTE0NyAtMTUwIC0yNiAwIC0yOSA0IC0zNSA0MyAtMTggMTEzCi03OCAzMTAgLTEyMiA0MDQgLTIwIDQxIC0zNCA1NyAtNjcgNzMgLTUxIDI0IC0xMjggMjYgLTE3MyA0eiBtNjg4IC00MzggYzQxCi00MSA2NiAtNTggMTAyIC02NiAyNiAtNyA0NyAtMTUgNDcgLTE4IDAgLTMgLTcgLTE0IC0xNiAtMjQgLTExIC0xMSAtMTcgLTM3Ci0xOCAtNzMgMCAtNjQgMSAtNjMgLTExNSAtNDQgLTY2IDExIC02OCAxMyAtOTYgNTggLTE1IDI1IC0yNyA1NSAtMjcgNjYgMCAxOQo1OCAxNTUgNjYgMTU1IDEgMCAyNyAtMjQgNTcgLTU0eiBtMTM2NCAtOTAxIGMxNDEgLTMzIDE0OSAtMzUgMTM5IC00NSAtMTkKLTE4IC0zMjYgLTEzMiAtMzM0IC0xMjQgLTUgNSAwIDQ2IDEwIDkyIDI0IDExMSAyNSAxMTMgNTIgMTA3IDEzIC0zIDczIC0xNgoxMzMgLTMweiBtLTYwOSAtMzQzIGM5IC02IDU0IC0xNjkgNjkgLTI0OSAyIC0xMyAxMiAtMzYgMjEgLTUzIDIzIC0zOCAxMiAtNDgKLTI5IC0yOCAtMjkgMTQgLTM2IDI2IC01NiA5MCAtMTIgNDAgLTMzIDEwNyAtNDcgMTQ5IC0xMyA0MiAtMjQgODEgLTI0IDg4IDAKMTIgNDkgMTUgNjYgM3oiLz4KPHBhdGggZD0iTTI4MjAgMTY0MCBjLTU2IC01IC05NiAtMjYgLTMzMCAtMTczIGwtODUgLTU0IC0zIC0xODggYy0yIC0xMzAgMQotMTkyIDkgLTIwMSA4IC0xMCAzNSAtMTQgODYgLTE0IDYwIDAgODAgLTQgMTAwIC0yMCAxOSAtMTQgNDEgLTIwIDc5IC0yMCA0MAowIDU0IC00IDU0IC0xNCAwIC04IDEwIC0yMiAyMiAtMzAgMTkgLTE0IDcwIC0xNiAzNTggLTE2IDI5NiAwIDMzOCAyIDM1OSAxNwpsMjQgMTYgLTUgMjkwIGMtNCAyMTkgLTggMjkxIC0xOCAyOTcgLTcgNCAtMzQgMTEgLTYxIDE0IC00MSA2IC00OSAxMCAtNDkgMjcKMCAxNSAtNSAxOSAtMTYgMTUgLTggLTMgLTIyIDEgLTMwIDkgLTE1IDE0IC02NiAyMSAtMTI2IDE2IC0xNiAtMSAtMjggMyAtMjgKOCAwIDYgLTExIDExIC0yNCAxMSAtMTQgMCAtMjcgNCAtMzAgOCAtNiA5IC0yMDMgMTEgLTI4NiAyeiBtMTQ3IC0zNCBjLTEgLTQKLTIwIC0xNCAtNDIgLTIyIC0yMiAtNyAtNDQgLTE5IC01MCAtMjYgLTE1IC0yMCAtNjIgLTQ4IC04MCAtNDggLTE5IDAgLTIyIDk2Ci0yIDEwMyAyMiA4IDE3NyAyIDE3NCAtN3ogbTIzOCAtMzUgYzUgMCA0IC02IC0yIC0xMiAtNiAtNiAtMzQgLTExIC02MyAtMTEKLTM0IDAgLTU2IC02IC02NyAtMTcgLTI3IC0yNyAtNjcgLTUxIC04NSAtNTEgLTE0IDAgLTE4IDkgLTE4IDQzIDAgMjQgMyA0NiA2CjQ5IDQgNSAxOTcgNCAyMjkgLTF6IG0xMDAgLTEyIGMxMCAtMTAgLTQgLTEzIC00NSAtOSAtMzIgMyAtNDIgOSAtMzQgMjEgNyAxMQo2MyAyIDc5IC0xMnogbTE0NyAtNTMgYzQgLTYgOCAtMTMzIDggLTI4MiAwIC0yMTggLTMgLTI3NCAtMTQgLTI4MyAtOSAtOAotMTA4IC0xMSAtMzQyIC05IGwtMzI5IDMgLTUgMTc4IGMtMyAxMDYgLTEgMTgyIDUgMTg4IDUgNSA3NiA5IDE1OSA5IDE4NyAwCjE4NiAtMSAxODYgMTE1IDAgNDUgMiA4NCA1IDg3IDExIDEwIDMyMCA1IDMyNyAtNnogbS04NDIgLTExNiBjMCAtNSAtNCAtMTAKLTEwIC0xMCAtNiAwIC0xMSAtNjkgLTEyIC0xNzIgbC0zIC0xNzMgLTc1IDAgLTc1IDAgLTMgMTcwIGMtMSA5MyAwIDE3NSAyCjE4MiA3IDE2IDE3NiAxOSAxNzYgM3ogbTE3NSAtMjkgYzMgLTUgLTggLTE5IC0yNSAtMzEgbC0zMCAtMjEgMCAtMTYwIDAgLTE2MAotNTIgMyAtNTMgMyAtMyAxNzkgYy0yIDEzNyAxIDE4MSAxMCAxODggMTggMTEgMTQ2IDEwIDE1MyAtMXoiLz4KPHBhdGggZD0iTTE0MzcgNTgzIGMtNCAtMyAtNyAtNjAgLTcgLTEyNSBsMCAtMTE4IDM0IDAgYzM0IDAgMzUgMSAzOCA0MyAzIDM5CjUgNDIgMzMgNDUgOTQgOCAxMTkgMTUgMTQ2IDQyIDQ1IDQ0IDIzIDg1IC01NyAxMDggLTQ0IDEzIC0xNzYgMTYgLTE4NyA1egptMTU3IC00MyBjMjkgLTExIDM0IC00MSAxMiAtNTkgLTggLTcgLTM0IC0xMSAtNTggLTkgLTM2IDMgLTQ0IDcgLTQ2IDI2IC0yCjEzIC0xIDMwIDIgMzggNiAxNiA1MyAxOSA5MCA0eiIvPgo8cGF0aCBkPSJNMTg3NCA1NzUgYy0xMiAtOCAtMzMgLTM4IC00OCAtNjcgLTE1IC0yOSAtNDAgLTc1IC01NiAtMTAzIC0xNiAtMjcKLTMwIC01MyAtMzAgLTU3IDAgLTUgMTggLTggNDAgLTggMjcgMCA0MCA0IDQwIDEzIDAgMzEgMzUgNDcgMTA0IDQ3IDY0IDAgNjgKLTEgODQgLTMwIDE1IC0yNiAyMyAtMzAgNjEgLTMwIDQxIDAgNDMgMSAzMCAxOCAtOCA5IC0yMSAzMSAtMjkgNDcgLTggMTcgLTE3CjMyIC0yMCAzNSAtMyAzIC0xOCAzMCAtMzQgNjAgLTE2IDMwIC0zNiA2MyAtNDQgNzMgLTE4IDIxIC03MCAyMiAtOTggMnogbTc1Ci04MSBjMTIgLTE5IDIxIC0zOSAyMSAtNDUgMCAtNSAtMjIgLTkgLTUwIC05IC0yNyAwIC01MCA0IC01MCA5IDAgMjIgMzIgODEKNDQgODEgOCAwIDIzIC0xNiAzNSAtMzZ6Ii8+CjxwYXRoIGQ9Ik0yMjc1IDU3NCBjLTI3IC04IC02MSAtMjIgLTc1IC0zMiAtNzAgLTUyIC02MCAtMTM2IDIyIC0xNzggNDAgLTIxCjE1NyAtMjkgMjE3IC0xNCBsNTEgMTIgMCA1OSAwIDU5IC04MSAwIGMtNzEgMCAtODAgLTIgLTc3IC0xNyAyIC0xMyAxNCAtMTkKNDEgLTIxIDM1IC0zIDM4IC02IDM1IC0zMCAtMyAtMjQgLTggLTI3IC00NyAtMzAgLTU4IC00IC04NiAzIC0xMTEgMzAgLTQwIDQ0Ci0xNiAxMDEgNTUgMTI4IDE3IDYgNTkgMTAgOTQgOCA3NSAtNCA5NSAxNSAzNCAzMSAtNDggMTQgLTk1IDEyIC0xNTggLTV6Ii8+CjxwYXRoIGQ9Ik0yNTkzIDU4MyBjLTEwIC0zIC0xMyAtMzggLTEzIC0xMjQgbDAgLTExOSAxMTAgMCBjMTAzIDAgMTEwIDEgMTEwCjIwIDAgMTcgLTggMTkgLTcyIDIyIC03MSAzIC03MyA0IC03NiAzMCAtMyAyNyAtMiAyNyA2MCAzMCA1MCAyIDYzIDcgNjYgMjAgMwoxNCAtNyAxNyAtNjAgMjAgLTU4IDMgLTYzIDUgLTY2IDI3IC01IDMyIDEyIDQxIDc5IDQxIDYwIDAgNzEgNCA2MiAyNiAtNCAxMQotMjcgMTQgLTk3IDEzIC01MCAwIC05NyAtMyAtMTAzIC02eiIvPgo8cGF0aCBkPSJNMzAyNCA1ODMgYy0xMiAtOCAtMTg0IC0yNjggLTE4NCAtMjc4IDAgLTMgMTIgLTUgMjggLTUgMjQgMCAzNyAxNQoxMTQgMTMzIDQ4IDcyIDg5IDEzNyA5MCAxNDIgNCAxMiAtMzMgMTggLTQ4IDh6Ii8+CjxwYXRoIGQ9Ik0zMTM0IDU3NyBjLTIgLTcgLTMgLTYyIC0yIC0xMjMgbDMgLTEwOSAzNyAtMyBjMzcgLTMgMzcgLTMgNDAgNDAKbDMgNDMgNjkgNyBjODIgOCAxMjAgMzEgMTI0IDc0IDQgMzYgLTE3IDU2IC03NCA3MiAtNTggMTcgLTE5MyAxNiAtMjAwIC0xegptMTg4IC00NSBjNiAtNiA4IC0yMiA0IC0zNyAtNiAtMjQgLTEwIC0yNiAtNTkgLTIzIC00OSAzIC01MiA1IC01NSAzMiAtMiAxNgoyIDMzIDEwIDM4IDE2IDExIDg2IDQgMTAwIC0xMHoiLz4KPHBhdGggZD0iTTM1NzggNTc0IGMtMTI4IC00MCAtMTQ4IC0xNTIgLTM3IC0yMDkgNzUgLTM5IDIwNCAtMjYgMjY1IDI3IDI5IDI1CjM0IDM3IDM0IDcyIDAgNTUgLTM3IDkyIC0xMTEgMTExIC02NSAxOCAtODkgMTcgLTE1MSAtMXogbTEzNyAtNDAgYzUzIC0yNSA1OQotOTYgMTEgLTEzNiAtMzMgLTI4IC0xMTYgLTI0IC0xNTAgNyAtMjYgMjQgLTM2IDc2IC0xOCAxMDAgMzEgNDMgMTAxIDU2IDE1NwoyOXoiLz4KPHBhdGggZD0iTTM5NzEgNTc0IGMtMjQgLTcgLTQ5IC0xOSAtNTcgLTI1IC0zNyAtMzEgMiAtNzkgODUgLTEwMyA2NyAtMjAgODYKLTMzIDcwIC01MiAtMTMgLTE2IC0xMDUgLTE5IC0xNDMgLTQgLTIzIDggLTI2IDcgLTI2IC0xMCAwIC0yOSA0NCAtNDMgMTIwCi0zNyA2NyA0IDEyNCAyNiAxMzMgNTAgMTEgMjggLTE4IDYyIC02MyA3NiAtNzAgMjEgLTExMCA0MCAtMTEwIDUwIDAgMjIgNDQKMzMgMTAyIDI3IDUyIC01IDU5IC00IDU2IDExIC02IDMyIC05MSA0MSAtMTY3IDE3eiIvPgo8cGF0aCBkPSJNNDIwNyA1ODMgYy0yMCAtMTkgLTUgLTMzIDM3IC0zMyA3NiAwIDc2IDAgNzYgLTExMiBsMCAtOTkgMzMgMyAzMgozIDUgMTAwIDUgMTAwIDQ1IDMgYzY0IDQgNzUgOSA2MCAyNyAtMTAgMTIgLTQwIDE1IC0xNTAgMTUgLTc1IDAgLTE0MCAtMwotMTQzIC03eiIvPgo8L2c+Cjwvc3ZnPgo=';
/**
 * Host for the DupCheckString-related blocks in Scratch 3.0
 * @param {Runtime} runtime - the runtime instantiating this block package.
 * @constructor
 */
class Scratch3DupCheckString {
    constructor (runtime) {
        this.runtime = runtime;
    }

    getInfo(){
        return{
            id: 'dupCheckString',
            name: formatMessage({
                id: 'dupCheckstring.categoryName',
                default: 'Duplicate String Check',
                description: 'Label for the dupCheckString extension category'
            }),
            blockIconURI: blockIconURI,
            blocks: [
                {
                    opcode: 'stringIfExists',
                    blockType: BlockType.REPORTER,
                    text: formatMessage({
                        id: 'dupCheckString.stringIfExists',
                        default: 'Check if [STRING1] is present',
                        description: 'To output True if the string is present already'
                    }),
                    arguments: {
                        STRING1: {
                            type: ArgumentType.STRING,
                            defaultValue: 'String1'
                        }
                    },
                    filter: [TargetType.SPRITE]
                },
                {
                    opcode: 'displayAllStrings',
                    blockType: BlockType.REPORTER,
                    text: formatMessage({
                        id: 'dupCheckString.displayAllStrings',
                        default: 'strings present in List',
                        description: 'To output the list of strings stored'
                    }),
                    filter: [TargetType.SPRITE]
                },
            ],
        };
    }

    stringIfExists (args, utill) {
        var flag = true;
        var tempList = this.runtime.list
        for(let i=0; i<tempList.length; i++){
            if(args.STRING1 == tempList[i]){
                flag=false;
                return true;
            }
        }

        if(flag){
            this.runtime.list.push(args.STRING1)
            console.log(this.runtime.list)
        }

        // Returning false as the string was not already sent before
        return false;
    }

    displayAllStrings(args, utill){
        if(this.runtime.list.length >0){
            return this.runtime.list
        }
        return 'No elements present'
    }
}

module.exports = Scratch3DupCheckString;