const ArgumentType = require('../../extension-support/argument-type');
const BlockType = require('../../extension-support/block-type');
const TargetType = require('../../extension-support/target-type');
const Cast = require('../../util/cast');
const Clone = require('../../util/clone');
const Color = require('../../util/color');
const formatMessage = require('format-message');
const MathUtil = require('../../util/math-util');
const RenderedTarget = require('../../sprites/rendered-target');
const log = require('../../util/log');
const StageLayering = require('../../engine/stage-layering');

/**
 * Icon svg to be displayed at the left edge of each extension block, encoded as a data URI.
 * @type {string}
 */
// eslint-disable-next-line max-len
const blockIconURI = 'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKIHdpZHRoPSI1MTIuMDAwMDAwcHQiIGhlaWdodD0iNTEyLjAwMDAwMHB0IiB2aWV3Qm94PSIwIDAgNTEyLjAwMDAwMCA1MTIuMDAwMDAwIgogcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCI+Cgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCw1MTIuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNMTg2NCA0MzE5IGMtMTAgLTE3IDEzIC0zNiAyNyAtMjIgMTIgMTIgNCAzMyAtMTEgMzMgLTUgMCAtMTIgLTUKLTE2IC0xMXoiLz4KPHBhdGggZD0iTTczNSA0MTYxIGMtNyAtMTIgMTIgLTI0IDI1IC0xNiAxMSA3IDQgMjUgLTEwIDI1IC01IDAgLTExIC00IC0xNQotOXoiLz4KPHBhdGggZD0iTTQxNTAgMzcwOSBjMCAtNDAxIC0xMCAtMTI3NSAtMTUgLTEzMjQgLTEzIC0xMjYgLTEzIC0xMzIgLTUgLTk1IGw3CjM1IDIgLTQyIGMwIC0yNCAtMyAtNDMgLTkgLTQzIC01IDAgLTEwIC05IC0xMCAtMTkgMCAtMTEgLTQgLTIzIC0xMCAtMjYgLTUKLTMgLTEwIC0xNyAtMTAgLTMxIDAgLTE0IDQgLTIyIDEwIC0xOSA2IDQgMTAgLTYgOSAtMjIgMCAtMTUgLTMgLTIzIC01IC0xNgotMyA3IC0xMiA5IC0yMCA2IC0xNyAtNiAtMTkgLTg0IC0yIC0xMDEgOSAtOSA5IC0xMiAwIC0xMiAtNyAwIC0xMiAtMTQgLTEzCi0zMiAwIC0yOCAtMiAtMzAgLTkgLTEzIC02IDE1IC05IDYgLTExIC0zNSBsLTIgLTU1IC03IDU1IGMtNCAzMCAtNyAtMTEwIC04Ci0zMTIgLTEgLTIzMiAtNiAtMzY5IC0xMiAtMzczIC03IC00IC0xMCA0MzUgLTEwIDEzMTAgMCAxNDU4IDQgMTM3MiAtNjQgMTQwMAotMzEgMTMgLTIyNSAxNSAtMTQwOCAxNSAtMTI4NyAwIC0xMzc1IC0xIC0xNDA4IC0xOCAtNzEgLTM1IC02NyAxNiAtNzMgLTk5OQotNCAtNzgwIC03IC05MTUgLTIwIC05MjcgLTggLTggLTE3IC0zMyAtMjEgLTU1IC0zIC0yMyAtMTAgLTQxIC0xNSAtNDEgLTYgMAotMTIgLTEwIC0xNCAtMjIgLTIgLTEzIC0zIDAgLTEgMjcgMiAzOSAxIDQzIC01IDIwIGwtOCAtMzAgLTUgMzAgYy0zIDE4IC01IDcKLTQgLTI1IDAgLTMwIC00IC0yMTEgLTggLTQwMiBsLTkgLTM0OCA0NCAyMyBjNjQgMzIgMjA0IDMyIDI3MSAtMSA2NyAtMzQgMTM2Ci0xMDcgMTY5IC0xNzkgMjkgLTYyIDI5IC02MiA1OSAtNTEgMTcgNSA1OSA4IDk0IDYgODUgLTUgMTM4IC00MSAxNzUgLTExNwpsMjYgLTU0IDExNSAzIGMxMTYgMiAzMzYgMiA0NjUgLTEgMzkgMCAxMDUgMSAxNDggMiA0MiAyIDc3IDEgNzcgLTMgMCAtNCA5Ci02IDE5IC01IDExIDAgMTggNCAxNiA3IC03IDEyIDQ2OSA4IDQ4NCAtNCAxMiAtOCAxMyAtOCA3IDIgLTQgNyAtMSAxMiA4IDEyCjkgMCAxNiAtNSAxNiAtMTEgMCAtOCA1IC03IDE2IDIgMTMgMTAgMTcgMTAgMjQgMCA1IC04IDE2IC0xMSAzMCAtNiAzMSAxMCA3MAoxMyA2NiA2IC00IC01IDE1MSAtNyAyMDIgLTIgNiAxIDEyIDkgMTIgMTkgMCAyOCAzNyA4MSA3MiAxMDIgMjAgMTIgNTEgMjAgNzkKMjAgNDIgMCA0NiAzIDYyIDM1IDkgMjAgMTcgMzcgMTcgMzggMCAxIC0xNTIgMSAtMzM3IC0xIC0yMjAgLTIgLTMzMyAtNiAtMzIzCi0xMiAxMiAtOCAxMSAtMTAgLTcgLTEwIC0xMyAwIC0yMyA1IC0yMyAxMCAwIDYgLTM3IDkgLTkyIDkgLTY4IC0xIC04MyAtNAotNTggLTkgMTkgLTQgLTE5MiAtOCAtNDcwIC04IC0yOTAgMCAtNDk2IDMgLTQ4NSA4IDEyIDUgLTY5IDkgLTIwNSAxMCAtMjI2IDEKLTMwNyAxMCAtMjIyIDIzIDIzIDQgNTM1IDcgMTEzOCA3IGwxMDk1IDAgNDEgMzQgYzYzIDU0IDEwNCA3MCAxOTMgNzQgNTggMwo5MSAtMSAxMTggLTEzIDU0IC0yMiAxMjcgLTkyIDE0OSAtMTQyIDEwIC0yNCAyNCAtNDMgMzEgLTQzIDM5IDAgMjI5IDE1NyAyNTgKMjEzIGwxMiAyMiAtMjQgLTIxIGMtMTQgLTEzIC0zMiAtMjAgLTQ0IC0xNyAtMTEgMiAtMzYgNSAtNTUgNyAtMTkgMSAtNDEgNQotNDggOSAtNiA1IC0xNiA1IC0yMiAyIC0xNiAtMTAgLTEyIDQgOCAyNCA0NCA0NiAxMDYgODEgMTQzIDgxIDIxIDAgNDEgNSA0NAoxMCAzIDUgLTMgMTAgLTE0IDEwIC0zMiAwIC0yNSAxMiAyNCA0NSAyNSAxNyA0NSAzNiA0NSA0MyAwIDYgLTIgMTIgLTUgMTIgLTgKMCAtMTM5IC05MyAtMTQ3IC0xMDQgLTEyIC0xNyAtOSAxNCA2IDcyIDIyIDgwIC00IDYxIC0zNCAtMjYgLTE0IC0zOSAtMjkgLTc1Ci0zMyAtNzkgLTEyIC0xMiAtNjcgLTEwIC02NSAyIDQgMjUgLTE2IDg1IC0yNyA4NSAtNyAwIC0zNCAtOSAtNjAgLTIwIC02MgotMjYgLTc2IC0yNSAtMzggMyA1MyAzOSAxMjMgMTA3IDE1OSAxNTQgMzggNTAgNzEgMTA5IDU2IDk5IC01IC0zIC0yNSAwIC00Mwo4IC0xOSA3IC0zOSAxMiAtNDUgOSAtNiAtMiAtMTcgMyAtMjQgMTIgLTE5IDIzIDE3IDY5IDU2IDczIDM2IDQgNTcgMjIgMjYgMjIKLTMxIDAgLTI3IDkgMjMgNjAgMjUgMjUgNDUgNTIgNDUgNjAgMCA4IC0yNCAtOSAtNTMgLTM4IC0yOSAtMjkgLTU2IC01MiAtNjAKLTUyIC00IDAgLTcgMTggLTcgNDAgMCA1NCAtMTQgNTAgLTI4IC03IGwtMTAgLTQ4IDEgNTIgMiA1MSAtMzkgLTIzIGMtMjIgLTEzCi00OCAtMzEgLTU4IC0zOSAtMTAgLTkgLTIwIC0xNiAtMjMgLTE2IC0zIDAgLTUgOTkgLTUgMjIwIDAgMTkzIDIgMjIwIDE2IDIyMAo4IDAgNTAgMTQgOTIgMzIgMTEwIDQ1IDIxMiAxNTMgMjEyIDIyMiAwIDI0IC0yOSA0NiAtNjEgNDYgLTQwIDAgLTE0NCAtNTEKLTIwNCAtMTAxIGwtNTAgLTQyIC0zIDQwIGMtNSA2MCA2OCAxNzkgMTI5IDIxMCAyNCAxMiA0MCAyMyAzNCAyMyAtNSAwIDE3IDI1CjUwIDU1IDMyIDMwIDU2IDU3IDUyIDYxIC02IDYgLTQ4IC0yNSAtMTI3IC05NSAtNDIgLTM3IC01MiAtMzkgLTQ1IC04IDMgMTIKMTIgNTUgMjAgOTUgOCA0MCAyNSA5MSAzNyAxMTUgMTYgMzEgMjIgNjEgMjIgMTEyIDEgNjQgLTEgNzAgLTIwIDczIC00OSA3Ci05MCAtMTI4IC02NCAtMjA3IDExIC0zMyA5IC01MSAtOSAtMTMyIC0xMiAtNTIgLTM0IC0xMTkgLTQ5IC0xNDkgbC0yNyAtNTUKLTUgNzU3IGMtMyA0MTYgLTggNzYwIC0xMiA3NjQgLTUgNCAtOCAtMTI1IC04IC0yODd6IG0tMjY3MiA4MiBjLTUgLTI0IC0zOAotMjcgLTM4IC0zIDAgMTAgMyAyMSA2IDI1IDExIDExIDM1IC01IDMyIC0yMnogbTEyNzYgMTAgYzEwIC0xNiAtNSAtNDEgLTI1Ci00MSAtMTQgMCAtMTkgNyAtMTkgMjUgMCAxOCA1IDI1IDE5IDI1IDExIDAgMjIgLTQgMjUgLTl6IG0tNDg2IC0xNDEgYzUgLTE2OQotMTUgLTIxNiAtOTYgLTIyNyAtNjYgLTkgLTE0NCAzOSAtMTEzIDcwIDkgOSAxOSA4IDQyIC02IDE3IC05IDQwIC0xNyA1MiAtMTcKNTQgMSA2NyAzNCA2NyAxODAgMCAxMjAgMCAxMjEgMjMgMTE4IDIxIC0zIDIyIC03IDI1IC0xMTh6IG0xNDAgOTcgYzIgLTEyIC0zCi0xNyAtMTcgLTE3IC0xMiAwIC0yMSA2IC0yMSAxMyAwIDMxIDMyIDM0IDM4IDR6IG01OTIgLTEwMyBjMCAtMTI1IDAgLTEyNgotMjkgLTE1NSAtMzUgLTM0IC03MiAtMzcgLTExOCAtOSAtMzIgMTkgLTUxIDU5IC0zOCA3OSAxMSAxOSAzMSAxMiA1MyAtMTkgMjYKLTM0IDU3IC0zOSA3MiAtMTEgNSAxMSAxMCA2MiAxMCAxMTUgMCAxMDggNSAxMjYgMzEgMTI2IDE4IDAgMTkgLTkgMTkgLTEyNnoKbTc5NSAxMCBjMCAtMTI0IC05IC0xNDcgLTY2IC0xNTkgLTU3IC0xMyAtMTM0IDUwIC05MSA3NCAxMSA2IDI1IDIgNDUgLTEzCmwyOSAtMjEgMTkgMjQgYzE2IDE5IDE5IDQwIDE5IDExOCAwIDkyIDEgOTQgMjMgOTEgMjEgLTMgMjIgLTYgMjIgLTExNHoKbS0zNTUgODYgYzAgLTE1IC03IC0yMCAtMjUgLTIwIC0xOCAwIC0yNSA1IC0yNSAyMCAwIDE1IDcgMjAgMjUgMjAgMTggMCAyNQotNSAyNSAtMjB6IG0xNzAgMTAgYzEzIC04IDEzIC0xMSAtMiAtMjcgLTIxIC0yMCAtNDUgLTUgLTM1IDIxIDcgMTggMTYgMjAgMzcKNnogbS0xNjI2IC0xNiBjMjEgLTIwIDIwIC02MyAtMSAtODYgLTIzIC0yNiAtNzggLTI0IC05NyA0IC0zMiA0NiAtNiA5OCA0OQo5OCAxOCAwIDQxIC03IDQ5IC0xNnogbS0xODEgLTU4IGM5IC0yMyAtMiAtMjYgLTg1IC0yNiAtNTggMCAtNzggMyAtNzggMTMgMAoyMyAxMSAyNyA4NiAyNyA1MiAwIDczIC00IDc3IC0xNHogbS01MzMgLTExIGMwIC04IDkgLTE1IDIwIC0xNSAxMSAwIDIwIC03CjIwIC0xNSAwIC04IC05IC0xNSAtMjAgLTE1IC0xMyAwIC0yMCAtNyAtMjAgLTIwIDAgLTExIC03IC0yMCAtMTUgLTIwIC04IDAKLTE1IDkgLTE1IDIwIDAgMTMgLTcgMjAgLTIwIDIwIC0xMSAwIC0yMCA1IC0yMCAxMSAwIDYgOSAxMyAyMCAxNiAxMSAzIDIwIDEyCjIwIDE5IDAgOCA3IDE0IDE1IDE0IDggMCAxNSAtNyAxNSAtMTV6IG0xOTg5IC00IGM4IC01IDExIC0xNiA4IC0yNSAtNSAtMTMKLTIxIC0xNiAtNzYgLTE2IC03MiAwIC05MiAxMCAtNzEgMzUgMTQgMTcgMTE1IDIxIDEzOSA2eiBtLTU3MCAtNTUgYzEyIC0xNAoxNSAtNyAtMTAxIC0yMTYgLTQ4IC04NyAtNjkgLTExNiAtODYgLTExOCAtMzUgLTUgLTI4IDE4IDUzIDE2MSBsNzQgMTMyIC0xMTcKMyBjLTExOSAzIC0xMzkgOSAtMTI5IDM2IDUgMTQgMjkgMTYgMTUwIDE2IDEwOSAwIDE0NyAtMyAxNTYgLTE0eiBtODI4IC0yIGM4Ci0yMSAtMTMgLTQyIC0yOCAtMjcgLTEzIDEzIC01IDQzIDExIDQzIDYgMCAxMyAtNyAxNyAtMTZ6IG0tMjAzMyAtOSBjMyAtOCAxMgotMTUgMjAgLTE1IDcgMCAxNiA3IDIwIDE1IDYgMTYgNDEgMjEgNTAgNiAzIC01IC0zIC0yMCAtMTUgLTM1IGwtMjAgLTI2IDIxCi0yMiBjMzUgLTM4IDcgLTY1IC0yOSAtMjkgLTI2IDI2IC0yOSAyNiAtNTcgMCAtMjMgLTIyIC00NCAtMTkgLTQ0IDYgMCA4IDEwCjIxIDIyIDI5IDIwIDE1IDIxIDE2IDUgMzQgLTkgMTAgLTE3IDI2IC0xNyAzNSAwIDIxIDM2IDIzIDQ0IDJ6IG0xNzgxIC03MCBjMAotMTggLTggLTIwIC02OSAtMjMgLTcyIC0zIC05MyA1IC04MiAzMyA1IDEzIDE5IDE1IDc4IDEzIDY1IC0zIDczIC01IDczIC0yM3oKbS0xNDE2IC00MCBjMzYgLTE4IDU1IC02MiA0MyAtOTYgLTYgLTEzIC00MCAtNTkgLTc2IC0xMDEgbC02NiAtNzcgMTAzIC0zCmM5NCAtMyAxMDIgLTQgMTAyIC0yMyAwIC0xOSAtNyAtMjAgLTEzNSAtMjAgLTEzMiAwIC0xMzUgMCAtMTM4IDIzIC0zIDE2IDE5CjQ3IDc3IDExNCA4NyAxMDAgMTAwIDEzMyA1NSAxNDQgLTM1IDkgLTcyIC0xMCAtODAgLTQxIC00IC0xNiAtMTMgLTI1IC0yNQotMjUgLTI4IDAgLTMzIDIzIC0xNSA1OSAyOSA1NSA5OCA3NiAxNTUgNDZ6IG0tNDgxIC0xMDIgbDMgLTkzIDY5IDAgYzcxIDAgODUKLTYgNzQgLTM0IC01IC0xMiAtMjEgLTE2IC03NSAtMTYgbC02OCAwIC0zIC03MiBjLTMgLTY3IC01IC03MyAtMjUgLTc2IC0yMgotMyAtMjMgMCAtMjMgNzIgbDAgNzUgLTYyIDMgYy01NSAzIC02MyA1IC02MyAyMyAwIDE4IDggMjAgNjMgMjMgbDYyIDMgMCA5NQpjMCA5MyAxIDk1IDIzIDkyIDIxIC0zIDIyIC04IDI1IC05NXogbTI1MjcgMzIgYzAgLTIyIC0zMSAtMzMgLTQ3IC0xNyAtMTcgMTcKLTEgNDQgMjQgNDAgMTUgLTIgMjMgLTEwIDIzIC0yM3ogbS00NjAgLTQwIGMwIC0xOSAtOCAtMjAgLTEyOSAtMjMgLTEzMSAtMwotMTU0IDMgLTE0MyAzMyA2IDEzIDI1IDE1IDEzOSAxMyAxMjUgLTMgMTMzIC00IDEzMyAtMjN6IG0zMDIgLTcxIGMyIC02IC0xMgotMjEgLTMyIC0zMiAtMzAgLTE4IC0zNSAtMjcgLTM1IC01NyAwIC0zOCAtMjIgLTQ5IC0zOSAtMTcgLTIzIDQ0IDI5IDEyNiA3OAoxMjAgMTMgLTIgMjYgLTggMjggLTE0eiBtLTE0MTYgLTIwIGM2MSAtMzEgNjEgLTQ1IC02IC0xMzggLTUyIC03MiAtNDYgLTEzNQoyMiAtMTk4IDExNCAtMTA3IDMyMiAtMTA3IDQyOSAxIDY3IDY3IDY4IDEyNyA0IDIxMyAtMjIgMjkgLTQwIDU2IC00MCA1OSAwCjU1IDEyNCAxMDIgMjA4IDc5IDIzIC02IDU1IC0yMiA3MiAtMzYgMzggLTMyIDM5IC03MCA1IC0xMjMgLTMzIC01MyAtNDAgLTg2Ci0yNSAtMTIwIDI0IC01OCA0OSAtNTkgMjgzIC0xMyAxMTYgMjMgMjEzIDM5IDIxNiAzNyAyIC0zIC0xIC01OCAtNyAtMTIzIC02Ci02NCAtMTUgLTE4NSAtMTggLTI2NyAtOCAtMTg5IC02IC0xOTMgOTIgLTE0MSA3MyAzOSAxMDEgNDAgMTQyIDMgNzcgLTcwIDI4Ci0yMTcgLTczIC0yMTcgLTE0IDAgLTQ3IDEyIC03NSAyNiAtMzkgMjEgLTUzIDIzIC02OSAxNCAtMTkgLTEwIC0yMSAtMjAgLTIxCi0xMDMgMCAtMTAwIC03IC0xNDAgLTIyIC0xMzEgLTUgMyAtOSAtMiAtOCAtMTIgNCAtMzYgMCAtNDIgLTMwIC00OSAtMjQgLTUKLTMwIC0xMiAtMzEgLTMzIDAgLTIzIC0yIC0yNCAtOCAtOCAtNyAxOCAtOCAxOCAtMTQgMyAtMyAtOSAtMTcgLTE3IC0yOSAtMTgKLTIyIDAgLTIyIC0xIC0zIC05IDE4IC04IDE3IC05IC03IC05IC0xNCAtMSAtNjIgNiAtMTA1IDE0IC0xMTkgMjMgLTE3OSAyMAotMjA4IC0xMCAtMzMgLTMyIC0zMyAtOTMgMCAtMTYwIDMxIC02MiAzMSAtODYgMyAtMTExIC01NiAtNDggLTEwNiAtNTYgLTE5MQotMzAgLTI2IDggLTQ3IDEyIC00NyA5IDAgLTMgLTcgMCAtMTUgNyAtMjIgMTggLTE5IDMyIDIxIDgzIDc2IDk4IDc0IDE2NyAtNgoyNDggLTExMCAxMTAgLTI4MyAxMTcgLTQxNCAxOCAtNTcgLTQzIC04MCAtOTMgLTc0IC0xNTMgNSAtNDQgMTQgLTYxIDU5IC0xMTgKMzEgLTM4IDIwIC03MCAtMzIgLTk0IC03MSAtMzEgLTE5NiAtMTMgLTIyNyAzNCAtMTQgMjIgLTEzIDI4IDE2IDg4IDQwIDgyIDQzCjEzOSA3IDE3OCAtMTMgMTQgLTM0IDI2IC00NyAyNiAtNjQgMCAtMzgzIC03MiAtNDAyIC05MSAtMjQgLTIzIC0zNyAtOSAtMzIKMzQgMyAyMyAxMSAxMTMgMTYgMjAwIDE0IDIwMyAxIDIzMSAtNzcgMTcxIC03NyAtNTkgLTE2OCAtMzEgLTE4OSA1NiAtMTQgNjAKLTIgMTA5IDM2IDE0MyA0MSAzNiAxMDIgMzcgMTUwIDIgNDAgLTMwIDY2IC0zMiA3OSAtNiAxMCAxNyA0IDE3OSAtMTUgNDQ5IC0zCjUwIC0yIDkyIDIgOTIgNSAwIDk4IC0xOCAyMDggLTQwIDEwOSAtMjIgMjExIC00MCAyMjYgLTQwIDM0IDAgNzAgNDAgNzAgNzkgMAoxNCAtMTQgNTMgLTMwIDg2IC0xNiAzMyAtMzAgNjYgLTMwIDcyIDAgMjMgNTUgNzQgOTUgODggNDUgMTYgMTIzIDExIDE2NiAtMTF6Cm0xNTA3IDE0IGMyMCAtMjAgMTUgLTEwMSAtOCAtMTI2IC0zOCAtNDEgLTEwMyAtNDMgLTEwOCAtMyAtMyAyMSAtMSAyMiAyNiAxNgoyMSAtNCAzNCAtMSA0NiAxMCAxOCAxOSAyMSA2NiA1IDgyIC0xMyAxMyAtNCAzMyAxNSAzMyA2IDAgMTcgLTUgMjQgLTEyegptLTExODAgLTE3NiBjMyAtODggMiAtOTMgLTIzIC0xMTggLTIyIC0yMiAtMzMgLTI1IC02MyAtMjAgLTQwIDYgLTc0IDM4IC02NQo2MSA3IDE5IDI3IDE5IDQzIDAgMTYgLTIwIDQ2IC0xOSA1NCAxIDMgOSA2IDQ0IDYgNzkgMCA3NSA3IDk3IDI5IDkzIDEzIC0zCjE3IC0yMCAxOSAtOTZ6IG03NzcgNjMgYzAgLTE5IC04IC0yMCAtMTI0IC0yMyAtMTI3IC0zIC0xNTQgNSAtMTI5IDM1IDggMTAKNDEgMTMgMTMyIDExIDExMyAtMyAxMjEgLTQgMTIxIC0yM3ogbTQxMiAtOTEgYzggLTIxIC0xMyAtNDIgLTI4IC0yNyAtMTMgMTMKLTUgNDMgMTEgNDMgNiAwIDEzIC03IDE3IC0xNnogbS0yMzQ0IC00OCBjOCAtMjAgLTIwIC00MyAtMzUgLTI4IC0xNCAxNCAtMwo0MiAxNiA0MiA3IDAgMTYgLTYgMTkgLTE0eiBtLTIxMyAtMzEgYzE5IC0yMyAtMyAtNjUgLTM0IC02NSAtMzUgMCAtNTIgMjQKLTM4IDU1IDEzIDI5IDUyIDM0IDcyIDEweiBtMjUyMiAtNTUgYzI3IC0yNyAyOSAtMzUgMjQgLTczIC04IC01MyAtOCAtNjQgMAotMTA4IDEyIC03MSAtNjggLTEyNSAtMTQxIC05NSAtMzYgMTUgLTYwIDQ5IC01MSA3MiA4IDIyIDMyIDE3IDUwIC0xMSAxOSAtMjkKNTEgLTMyIDc4IC04IDMyIDI5IDE5IDY2IC0yNiA3NCAtMzIgNiAtMzAgMjkgMyA0MCAzNSAxMiA0NyAzOSAzMSA2OSAtMTYgMzAKLTYzIDI3IC04OCAtNyAtMTMgLTE3IC0yNSAtMjQgLTM2IC0yMCAtMjQgMTAgLTE5IDM1IDEzIDY4IDQyIDQxIDEwMSA0MSAxNDMKLTF6IG0tMjI5MyAtMTM5IGM4IC01IDExIC0xNiA4IC0yNSAtNSAtMTQgLTI4IC0xNiAtMTYxIC0xNiAtMTU2IDAgLTE4MCA2Ci0xNTYgMzUgMTAgMTIgNDIgMTUgMTU0IDE1IDc3IDAgMTQ3IC00IDE1NSAtOXogbS0yMjEgLTE5MyBjMTcgLTE3IDE1IC02MyAtMgotNzcgLTQ2IC0zOCAtMTExIDI1IC03MSA2OSAyMCAyMiA1NSAyNiA3MyA4eiBtMjYxMSAtMzIgYzkgLTExIDEwIC0yMCAxIC0zNgotMTMgLTI1IC00NyAtMjQgLTYzIDIgLTIyIDM0IDM2IDY2IDYyIDM0eiBtMSAtMjE2IGMwIC0yMSAtMjQgLTI4IC0zNSAtMTAgLTgKMTQgMyAzMCAyMSAzMCA4IDAgMTQgLTkgMTQgLTIweiBtLTI2MjUgLTExNSBjMCAtMjIgLTMxIC0zMyAtNDcgLTE3IC0xNyAxNwotMSA0NCAyNCA0MCAxNSAtMiAyMyAtMTAgMjMgLTIzeiBtMTA5IC0xMTEgYzEzIC01IDE2IC0yNSAxNiAtMTIxIDAgLTEzNiAtMTMKLTE3NiAtNjUgLTE5MyAtNTggLTE5IC0xMzggMzEgLTEyMSA3NiA4IDIxIDI2IDE3IDQ4IC0xMSAyMyAtMjkgNDQgLTMyIDcwIC04CjE1IDE0IDE4IDMyIDE4IDEzMyAwIDEyOCAyIDEzNiAzNCAxMjR6IG0yNDUyIC0xMCBjNDcgLTIyIDY3IC02NCA2NyAtMTM5IDAKLTEwMiAtNDAgLTE2MiAtMTEyIC0xNzIgLTQ0IC02IC05MSAxNiAtOTEgNDIgMCAxOCAyMCAxOSA1NSAzIDU4IC0yNiAxMDUgMzQKMTA1IDEzNyAwIDQyIC01IDYwIC0yMSA3NiAtMjkgMjkgLTc5IDIzIC05OSAtMTMgLTE3IC0zMiAtOCAtNTYgMjggLTczIDQ1Ci0yMCAxOCAtNDkgLTMxIC0zMiAtMzMgMTEgLTQ3IDM0IC00NyA3OSAwIDQyIDIzIDc2IDY0IDk0IDQwIDE3IDQyIDE3IDgyIC0yegptLTIwNiAtMjggYzAgLTggLTUgLTE4IC0xMSAtMjIgLTE0IC04IC0zMyAxMSAtMjUgMjUgMTAgMTYgMzYgMTMgMzYgLTN6Cm0tMjEwMCAtMjYgYzAgLTIxIC0yNCAtMjggLTM1IC0xMCAtOCAxNCAzIDMwIDIxIDMwIDggMCAxNCAtOSAxNCAtMjB6IG0yNTcxCi00NyBjLTkgLTE2IC0xMCAtMTQgLTExIDEyIDAgMjEgMyAyNiAxMSAxOCA4IC04IDggLTE2IDAgLTMweiBtMTYgLTQ1IGMtMyAtOAotNiAtNSAtNiA2IC0xIDExIDIgMTcgNSAxMyAzIC0zIDQgLTEyIDEgLTE5eiBtLTE1MjIgLTEzOCBjMCAtMTE2IC0yIC0xMzUKLTE2IC0xMzggLTI2IC01IC0zMSAyNSAtMjMgMTU2IDYgMTA1IDkgMTIyIDIzIDEyMCAxNCAtMyAxNiAtMjIgMTYgLTEzOHoKbTE1MDIgODggYy0zIC04IC02IC01IC02IDYgLTEgMTEgMiAxNyA1IDEzIDMgLTMgNCAtMTIgMSAtMTl6IG0tODM3IC0xNTkgYzAKLTEyIC0yOSAtMjQgLTM3IC0xNiAtMyA0IC0zIDEzIDAgMjEgNiAxNiAzNyAxMSAzNyAtNXogbS0xMzUwIC0yMCBjMCAtMjAgLTI0Ci0yNiAtMzUgLTkgLTggMTMgMTQgNDIgMjYgMzQgNSAtMyA5IC0xNCA5IC0yNXogbS0yNTAgLTQgYzAgLTggLTEzIC0yMSAtMzAKLTMwIC0yMyAtMTIgLTMxIC0yNCAtMzYgLTU2IC01IC0yOSAtMTEgLTM5IC0yMyAtMzcgLTM4IDcgLTE4IDk4IDI4IDEyMyAzNAoxOSA2MSAxOSA2MSAweiBtMTAwIC0yNCBjMzEgLTU5IC0xMiAtMTUxIC03MCAtMTUxIC00MiAwIC02MCAxMCAtNjAgMzIgMCAxNwo1IDE5IDM5IDEzIDMzIC01IDQxIC0zIDUwIDE0IDE0IDI2IDE0IDY0IDAgNzggLTYgNiAtOCAxNiAtNSAyMiAxMSAxNyAzNCAxMwo0NiAtOHogbTIxMjIgLTM4IGMxMCAtOSAxOCAtMjMgMTggLTMxIDAgLTIzIC0zMCAtNTIgLTU1IC01MiAtNDMgMCAtNjAgNDcKLTI4IDgyIDIwIDIyIDQxIDIzIDY1IDF6IG0tMjc3IC0xOCBjMCAtMTkgLTggLTIwIC0yMDkgLTIzIC0xMjQgLTEgLTIxNCAyCi0yMTkgNyAtNSA1IC03IDE3IC00IDI2IDYgMTMgMzMgMTUgMjE5IDEzIDIwNSAtMyAyMTMgLTQgMjEzIC0yM3ogbS0xNjQwIC00MApjMCAtMjIgLTMxIC0zMyAtNDcgLTE3IC0xNyAxNyAtMSA0NCAyNCA0MCAxNSAtMiAyMyAtMTAgMjMgLTIzeiBtLTUyOCAtMTEgYzkKLTI1IC0xNiAtMzQgLTg3IC0zMiAtNTkgMyAtNjUgNSAtNjggMjYgLTMgMjEgMCAyMiA3MyAyMiA2MCAwIDc3IC0zIDgyIC0xNnoKbTIzMzEgLTg0IGM0NyAtMjkgNTggLTY0IDM4IC0xMjMgLTE1IC00MyAtMTUgLTQ5IC0xIC02OSA0NCAtNjMgLTYgLTE0OCAtODgKLTE0OCAtNTAgMCAtOTcgMjkgLTk3IDYwIDAgMzEgMTkgMzMgNTEgNiAzNiAtMzAgNDcgLTMyIDc3IC0xMCAzOSAyNyAyNyA3OAotMjUgOTkgLTMwIDEzIC0zMyAxNyAtMjMgMzUgNiAxMSAyMCAyMCAzMSAyMCAzMSAwIDQ2IDQzIDI1IDc1IC0yMSAzMiAtNTAgMzIKLTgyIDAgLTI4IC0yOCAtNTQgLTMzIC01NCAtOSAwIDI2IDE5IDUzIDQ4IDY4IDM3IDIxIDYxIDE5IDEwMCAtNHogbTU0OSAtMTYKYy0zIC0zIC0xMiAtNCAtMTkgLTEgLTggMyAtNSA2IDYgNiAxMSAxIDE3IC0yIDEzIC01eiBtLTI4ODcgLTE5IGMyMSAtMjUgMQotMzUgLTc2IC0zNSAtNjYgMCAtNzQgMiAtNzQgMTkgMCAyNSAxMiAyOSA4MSAzMCAzOCAxIDYxIC00IDY5IC0xNHogbTE5MjEKLTE4IGMxOSAtMTIgNDEgLTM2IDQ4IC01MiAxOCAtMzcgMjkgLTE2MSAxMyAtMTUxIC02IDMgLTEzIDIgLTE2IC0zIC0zIC01Ci0xNSAtNyAtMjYgLTQgLTExIDMgLTI3IDAgLTM1IC03IC05IC04IC0yOSAtMTAgLTUyIC02IC0yNCAzIC0zMSAyIC0xOSAtMyAyMAotOCAyMCAtOCAwIC0xMyAtMTAgLTIgLTUyIC02IC05MyAtNyAtNDAgLTEgLTg0IC03IC05NyAtMTMgLTE3IC04IC0zMSAtNyAtNTMKMiAtMTYgNiAtMzUgOSAtNDIgNSAtNiAtNCAtMTUgLTEgLTIwIDYgLTYgMTAgLTkgMTEgLTkgMiAwIC03IC03IC0xMyAtMTUgLTEzCi04IDAgLTE1IDUgLTE1IDEwIDAgNiAtOCAxMCAtMTggMTAgLTEwIDAgLTI0IDYgLTMxIDEzIC0xMSAxMCAtMTEgOCAtMiAtMTAgNgotMTMgMTAgLTIzIDkgLTI0IC0xNyAtNCAtNTggLTMgLTU4IDIgMCA0IC0xNSA5IC0zNCAxMSAtMjAgMiAtMzIgMCAtMjkgLTYgNAotNSAtNiAtNyAtMjMgLTQgLTE2IDMgLTM4IDIgLTQ5IC0yIC0xMiAtNCAtMzEgLTIgLTQ3IDcgLTI2IDEyIC0yOCAxMiAtMjggLTYKMCAtMTQgLTUgLTE4IC0yMCAtMTQgLTExIDMgLTIwIDEwIC0yMCAxNiAwIDUgLTggMSAtMTggLTEwIC0xNSAtMTggLTIwIC0xOQotMzUgLTggLTE5IDEzIC02IDMyIDEzIDIwIDYgLTMgMTAgLTEgMTAgNCAwIDYgLTggMTEgLTE3IDEwIC0yMSAtMSAtNjMgLTE3Ci00OCAtMTggNiAtMSAzIC01IC00IC0xMCAtOSAtNiAtMjIgLTYgLTMyIDAgLTI3IDE0IC0zOSAxMSAtMzIgLTggNCAtMTAgMgotMTQgLTUgLTkgLTYgMyAtMTMgMiAtMTcgLTQgLTMgLTUgLTExIC0xMCAtMTcgLTEwIC03IDAgLTcgNCAxIDEzIDggMTEgNiAxOAotOSAzMiAtMTEgMTAgLTIwIDEzIC0yMCA3IDAgLTcgNSAtMTIgMTAgLTEyIDYgMCAxMCAtMyAxMCAtNyAwIC0xNCAtNDc1IC0yMwotNTAyIC0xMCAtMTAgNCAtMTggNCAtMTggLTEgMCAtMTAgLTMwIC05IC00NiAwIC01IDQgLTE2IDMgLTI0IC0yIC04IC01IC0yMgotMiAtMzcgNyAtMTQgMTAgLTIzIDExIC0yMyA0IDAgLTIxIC0yMCAtMTEgLTM1IDE5IC0zMiA2MiAtMTEgMTc0IDQxIDIyMiA1Ngo1MCAyNSA0OCA4NDAgNDggbDc2MSAwIDM0IC0yM3ogbS0xOTAxIC0yMTEgYzAgLTE4IC0xNiAtMjkgLTMwIC0yMSAtMTMgOCAtMQozNSAxNiAzNSA4IDAgMTQgLTYgMTQgLTE0eiBtMjg1NSAtNiBjMyAtNiAtMSAtNyAtOSAtNCAtMTggNyAtMjEgMTQgLTcgMTQgNgowIDEzIC00IDE2IC0xMHogbTUwIC02MCBjLTMgLTUgLTExIC0xMCAtMTYgLTEwIC02IDAgLTcgNSAtNCAxMCAzIDYgMTEgMTAgMTYKMTAgNiAwIDcgLTQgNCAtMTB6IG0tMjQ3NyAtMjM3IGMtMjEgLTIgLTU3IC0yIC04MCAwIC0yNCAyIC03IDQgMzcgNCA0NCAwIDYzCi0yIDQzIC00eiBtMTM4NSAwIGMtMTMgLTIgLTMzIC0yIC00NSAwIC0xMyAyIC0zIDQgMjIgNCAyNSAwIDM1IC0yIDIzIC00egptLTkxMCAtMjAgYy03IC0yIC0xOSAtMiAtMjUgMCAtNyAzIC0yIDUgMTIgNSAxNCAwIDE5IC0yIDEzIC01eiBtMjM0IDEgYy0zCi0zIC0xMiAtNCAtMTkgLTEgLTggMyAtNSA2IDYgNiAxMSAxIDE3IC0yIDEzIC01eiIvPgo8cGF0aCBkPSJNMTkxNyAzNzI0IGMtMTAgLTEwIC05IC00MiAyIC00OCAxOCAtMTEgNDIgNiAzOSAyOCAtMyAyMSAtMjggMzMKLTQxIDIweiIvPgo8cGF0aCBkPSJNMjA1NCAyNzAwIGMtMzMgLTEzIC00OSAtNjIgLTMyIC05NyBsMTMgLTI4IDUwMCAtMyBjMjc1IC0xIDUxMCAwCjUyMyAzIDM0IDggNDggNDcgMzIgODUgLTcgMTggLTIzIDM1IC0zNCA0MCAtMjkgMTEgLTk3NSAxMSAtMTAwMiAweiIvPgo8cGF0aCBkPSJNMjA2MCAyNDIxIGMtNTIgLTE0IC01OSAtOTUgLTExIC0xMjEgMTUgLTcgMTcyIC0xMCA1MTYgLTggNTM4IDMKNTE2IDEgNTMwIDYwIDUgMjEgMSAzMyAtMTkgNTIgbC0yNSAyNiAtNDgzIC0xIGMtMjY2IC0xIC00OTQgLTQgLTUwOCAtOHoiLz4KPHBhdGggZD0iTTI5OTAgMTc0MCBjMCAtNSA1IC0xMCAxMCAtMTAgNiAwIDEwIDUgMTAgMTAgMCA2IC00IDEwIC0xMCAxMCAtNSAwCi0xMCAtNCAtMTAgLTEweiIvPgo8cGF0aCBkPSJNMTIzMCAzMDA1IGMwIC04IDcgLTE1IDE1IC0xNSA4IDAgMTUgNyAxNSAxNSAwIDggLTcgMTUgLTE1IDE1IC04IDAKLTE1IC03IC0xNSAtMTV6Ii8+CjxwYXRoIGQ9Ik0xMjM3IDI2MTMgYy0xNCAtMTMgLTYgLTMzIDEzIC0zMyAxMyAwIDIwIDcgMjAgMjAgMCAxOSAtMjAgMjcgLTMzCjEzeiIvPgo8cGF0aCBkPSJNMzg1NyAyNTk0IGMtOCAtOCAxIC0yNCAxNCAtMjQgNSAwIDkgNyA5IDE1IDAgMTUgLTEyIDIwIC0yMyA5eiIvPgo8cGF0aCBkPSJNMzgzNyAxNjk0IGMtMTQgLTE1IC02IC0zNCAxNCAtMzQgMTQgMCAxOSA1IDE3IDE3IC0zIDE4IC0yMCAyNyAtMzEKMTd6Ii8+CjxwYXRoIGQ9Ik0yMjEwIDEzMTAgYzAgLTUgNyAtNyAxNSAtNCA4IDQgMTUgOCAxNSAxMCAwIDIgLTcgNCAtMTUgNCAtOCAwIC0xNQotNCAtMTUgLTEweiIvPgo8cGF0aCBkPSJNMjgzMCAxMjgwIGMtOSAtNiAtMTAgLTEwIC0zIC0xMCA2IDAgMTUgNSAxOCAxMCA4IDEyIDQgMTIgLTE1IDB6Ii8+CjxwYXRoIGQ9Ik00MzgyIDMxNjkgYzIgLTYgOCAtMTAgMTMgLTEwIDUgMCAxMSA0IDEzIDEwIDIgNiAtNCAxMSAtMTMgMTEgLTkgMAotMTUgLTUgLTEzIC0xMXoiLz4KPHBhdGggZD0iTTg0NCAyNTYzIGM3IC0xMiAtOSAtMjYgLTMyIC0yOSAtOCAtMiAtMTUgLTQgLTE3IC02IC03IC03IDE2IC05MwozMSAtMTE3IDEyIC0xNyAxMyAtMjYgNSAtMzQgLTkgLTkgLTMwIDggLTgwIDYzIC0zOCA0MSAtNzIgNzIgLTc2IDY4IC00IC00CjMxIC00OSA3OCAtMTAwIDgzIC05MSA4NiAtOTYgMTE3IC0xOTYgMzMgLTEwNiAzNCAtMTMxIDYgLTkwIC05IDEzIC0zMCA0MgotNDcgNjYgLTI4IDQwIC01NSA1MCAtNDIgMTUgNSAtMTIgLTkgLTggLTUzIDE1IC03OCA0MCAtOTQgNDQgLTk0IDI4IDAgLTggMTMKLTE5IDI4IC0yNSAzOSAtMTYgMTIwIC03MSAxMDQgLTcxIC03IDAgLTI0IDcgLTM3IDE2IC0xNCA5IC0yNSAxMiAtMjUgNiAwIC02CjEzIC0xOSAyOSAtMjggMTcgLTEwIDI4IC0yMSAyNSAtMjUgLTYgLTEwIDM5IC0zMyA5NyAtNDggMzYgLTEwIDUwIC0yMCA2MgotNDQgbDE2IC0zMiAwIDQwIGMxIDIyIC0xNiA5MiAtMzYgMTU1IC0zNyAxMTUgLTQ0IDE3NiAtMjggMjQ3IDkgNDEgMCA5MyAtMjEKMTE5IC04IDEwIC0xMyAxNCAtMTAgN3oiLz4KPHBhdGggZD0iTTQwNzAgMjE2NSBjMCAtOCA0IC0xNSAxMCAtMTUgNSAwIDcgNyA0IDE1IC00IDggLTggMTUgLTEwIDE1IC0yIDAKLTQgLTcgLTQgLTE1eiIvPgo8cGF0aCBkPSJNNDA2MCAyMDAzIGMwIC0yMSAzIC0yNCA5IC0xNCA1IDggNyAyMCA0IDI4IC04IDIxIC0xMyAxNSAtMTMgLTE0eiIvPgo8cGF0aCBkPSJNOTk3IDIwMDYgYy00IC0xMCAtMyAtMTUgMyAtMTEgNiAzIDExIC00IDExIC0xNyAxIC0xNiAzIC0xOCA2IC02IDIKMTAgMCAyNSAtNSAzNCAtOCAxNSAtMTAgMTUgLTE1IDB6Ii8+CjxwYXRoIGQ9Ik02MDAgMTk0NCBjMCAtNCAyOSAtNDUgNjQgLTkzIDc3IC0xMDQgMTE3IC0xNjQgMTEyIC0xNjggLTEgLTIgLTI1CjQgLTUyIDEyIC0zMCA5IC01MiAxMSAtNTggNSAtMTEgLTExIDIyIC0yNSA5MyAtNDEgMjUgLTUgNDkgLTE1IDUzIC0yMiAxMQotMTcgMTAgLTM5IC0yIC0zMiAtNSAzIC0xMCAxIC0xMCAtNCAwIC02IC05IC0xMSAtMTkgLTExIC0xMCAwIC0yMSAtNyAtMjUKLTE1IC0zIC04IC0xMyAtMTUgLTIxIC0xNSAtOSAwIC0xMyAtNCAtMTAgLTEwIDExIC0xOCAtNCAtMTEgLTI1IDEyIGwtMjEgMjMKMTQgLTM0IGMyMyAtNTQgOTAgLTEzMyAxNjUgLTE5NCAzOCAtMzEgNzIgLTU3IDc2IC01NyAzIDAgNiAxMDUgNiAyMzMgbDAgMjMzCi0zMyAzMiBjLTE4IDE4IC0zOCAzMiAtNDQgMzIgLTYgMCAtMTQgNiAtMTcgMTMgLTMgNiAtNSAtNyAtMyAtMzAgMSAtMjQgMAotNDMgLTMgLTQzIC0zIDAgLTUgLTIzIC01IC01MCAwIC0yOCAtMyAtNTAgLTcgLTUwIC01IDAgLTggMzIgLTggNzAgMCA0MCAtNAo3MCAtMTAgNzAgLTUgMCAtMTAgLTIxIC0xMCAtNDcgbC0xIC00OCAtMzQgNDAgYy0zMiAzNiAtMzUgNDYgLTM1IDEwMyAwIDcyCi0xNyA4NSAtMjIgMTYgbC0zIC00NiAtNDQgNjEgYy00MCA1NCAtNjEgNzQgLTYxIDU1eiIvPgo8cGF0aCBkPSJNNjM1IDEzNzMgYzMgLTIxIDkgLTQ5IDEyIC02MiA3IC0yOCA5IC0yOSAtODUgMzcgLTM1IDI0IC02NiA0MSAtNzAKMzcgLTcgLTcgNjYgLTc1IDgxIC03NSA0IDAgNyAtNSA3IC0xMSAwIC02IC05IC04IC0yMCAtNCAtMTQgNCAtMjAgMiAtMjAgLTgKMCAtMTEgMTYgLTE3IDUzIC0yMiAzMyAtNSA2NiAtMTggOTEgLTM2IDQyIC0zMCA3NCAtNjkgNTcgLTY5IC02IDAgLTExIDUgLTExCjEwIDAgNiAtNCAxMCAtMTAgMTAgLTE0IDAgLTEyIC0yNyAzIC0zMyA2IC0yIC04IC00IC0zMyAtMiAtMjUgMSAtNTAgLTIgLTU2Ci02IC01IC01IC0yMiAtMiAtMzcgNiAtMjYgMTMgLTI3IDEzIC0xNiAtNyAyMiAtNDEgNzUgLTkwIDE0OCAtMTQwIGw3NSAtNTAKMjEgNDkgYzEyIDI2IDQzIDc0IDY5IDEwNiA0NCA1NSA0NyA2MSA0NCAxMTAgLTMgNTEgLTQgNTIgLTUzIDc5IC0yNyAxNSAtNTIKMjUgLTU1IDIyIC0yIC0zIDAgLTggNiAtMTIgNSAtNCA3IC0yMCAzIC0zNyAtNSAtMjIgLTcgLTI1IC05IC0xMCAtMyAyMSAtNgozNSAtMTAgNDggLTEgNCAtMyAxMCAtNCAxNSAtMyAxNiAtMTggMzIgLTI2IDI3IC00IC0zIC00IC0yNCAyIC00NyA1IC0yNCAxMQotNjAgMTMgLTgwIDMgLTM2IDMgLTM3IC0xOCAtMjYgLTEyIDYgLTI0IDE0IC0yNyAxNyAtMyAzIC0yMSAxOCAtNDEgMzMgLTMxCjIzIC0zOSAzOCAtNTQgOTggLTE4IDczIC00MyAxMDAgLTMwIDMzeiIvPgo8cGF0aCBkPSJNMTk5OCAxMDAzIGMxNyAtMiA0NyAtMiA2NSAwIDE3IDIgMyA0IC0zMyA0IC0zNiAwIC01MCAtMiAtMzIgLTR6Ii8+CjxwYXRoIGQ9Ik0yMTI4IDEwMDMgYzcgLTMgMTYgLTIgMTkgMSA0IDMgLTIgNiAtMTMgNSAtMTEgMCAtMTQgLTMgLTYgLTZ6Ii8+CjxwYXRoIGQ9Ik0yMjE4IDEwMDMgYzcgLTMgMTYgLTIgMTkgMSA0IDMgLTIgNiAtMTMgNSAtMTEgMCAtMTQgLTMgLTYgLTZ6Ii8+CjxwYXRoIGQ9Ik0yNTI4IDEwMDMgYzYgLTIgMTggLTIgMjUgMCA2IDMgMSA1IC0xMyA1IC0xNCAwIC0xOSAtMiAtMTIgLTV6Ii8+CjxwYXRoIGQ9Ik0yNzM4IDEwMDMgYzEyIC0yIDMyIC0yIDQ1IDAgMTIgMiAyIDQgLTIzIDQgLTI1IDAgLTM1IC0yIC0yMiAtNHoiLz4KPHBhdGggZD0iTTQyNzIgODMzIGMzIC0zNiA1IC0zOCA0MiAtNDEgMjEgLTIgNDMgMSA0OSA3IDE0IDE0IC00NSA3MSAtNzMgNzEKLTE4IDAgLTIxIC01IC0xOCAtMzd6Ii8+CjxwYXRoIGQ9Ik03MDAgODA1IGMwIC04IDUgLTE1IDEwIC0xNSA2IDAgMTAgNyAxMCAxNSAwIDggLTQgMTUgLTEwIDE1IC01IDAKLTEwIC03IC0xMCAtMTV6Ii8+CjwvZz4KPC9zdmc+Cg==';
/**
 * Host for the PictoBloxString-related blocks in Scratch 3.0
 * @param {Runtime} runtime - the runtime instantiating this block package.
 * @constructor
 */
class Scratch3PictoBloxString {
    constructor (runtime) {
        this.runtime = runtime;
    }

    getInfo(){
        return{
            id: 'pictoBloxString',
            name: formatMessage({
                id: 'pictobloxstring.categoryName',
                default: 'String',
                description: 'Label for the pictoBloxString extension category'
            }),
            blockIconURI: blockIconURI,
            blocks: [
                {
                    opcode: 'indexOf',
                    blockType: BlockType.REPORTER,
                    text: formatMessage({
                        id: 'pictoBloxString.indexof',
                        default: 'Index of [STRING2] in [STRING1] ',
                        description: 'To output the index of the second string in the first string if any'
                    }),
                    arguments: {
                        STRING1: {
                            type: ArgumentType.STRING,
                            defaultValue: 'String1'
                        },
                        STRING2: {
                            type: ArgumentType.STRING,
                            defaultValue: 'String2'
                        }
                    },
                    filter: [TargetType.SPRITE]
                },
                {
                    opcode: 'equal',
                    blockType: BlockType.REPORTER,
                    text: formatMessage({
                        id: 'pictoBloxString.equal',
                        default: 'Is [STRING1] equal to [STRING2] (Not Case Sensitive)',
                        description: 'To output return true if both strings are equal otherwise false. This block is not case sensitive'
                    }),
                    arguments: {
                        STRING1: {
                            type: ArgumentType.STRING,
                            defaultValue: 'String1'
                        },
                        STRING2: {
                            type: ArgumentType.STRING,
                            defaultValue: 'String2'
                        }
                    },
                    filter: [TargetType.SPRITE]
                }
            ],
        };
    }

    indexOf (args, utill) {
        for(let sourcePos = 0; sourcePos < args.STRING1.length - args.STRING2.length+1; sourcePos++) {
            let found = true;
            for(let findPos = 0; findPos < args.STRING2.length; findPos++) {
                // if the current char is not a match, then mark as not found and break from loop
                if(args.STRING1.charAt(sourcePos+findPos) != args.STRING2.charAt(findPos)) {
                    found = false;
                    break;
                }
            }
            if(found) {
                return sourcePos;
            }
        }
    
        // return -1 to indicate the string was not found
        return 'Not Found';
    }

    equal (args, utill){
        return args.STRING1.toLowerCase() === args.STRING2.toLowerCase() ;
    }
}

module.exports = Scratch3PictoBloxString;